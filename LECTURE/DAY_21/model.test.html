<!DOCTYPE html>
<html lang="ko-KR">
<head>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
  <meta charset="UTF-8">
  <title>Model 객체 테스트</title>
  <style>
    body {margin: 0;}
    .coverlist {
      width: 80vw;
      margin: 10vh auto;
    }
    .coverlist img {
      float: left;
      width: 20vw;
      height: auto;
    }
  </style>
  <script src="js/Model.js"></script>
</head>
<body>

  <div class="coverlist">
    <!-- <img
      src="media/cover/001.EdSheeran-ShapeOfYou.jpg"
      alt="EdSheeran - Shape Of You"> -->
  </div>

<script>
// console.log('music_playlist.constructor:', music_playlist.constructor);
var data = [
  {
    "cover"  : "cover/001.EdSheeran-ShapeOfYou.jpg",
    "source" : "source/001.EdSheeran-ShapeOfYou.mp3"
  },
  {
    "cover"  : "cover/002.TheChainsmokers&Halsey-Closer.jpg",
    "source" : "source/002.TheChainsmokers&Halsey-Closer.mp3"
  },
  {
    "cover"  : "cover/003.Zayn&TaylorSwift-IDon'tWannaLiveForever(FiftyShadesDarker).jpg",
    "source" : "source/003.Zayn&TaylorSwift-IDon'tWannaLiveForever(FiftyShadesDarker).mp3"
  },
  {
    "cover"  : "cover/004.KatyPerry&SkipMarley-ChainedToTheRhythm.jpg",
    "source" : "source/004.KatyPerry&SkipMarley-ChainedToTheRhythm.mp3"
  },
  {
    "cover"  : "cover/005.Migos&LilUziVert-BadAndBoujee.jpg",
    "source" : "source/005.Migos&LilUziVert-BadAndBoujee.mp3"
  },
  {
    "cover"  : "cover/006.TheChainsmokers-Paris.jpg",
    "source" : "source/006.TheChainsmokers-Paris.mp3"
  },
  {
    "cover"  : "cover/007.Rihanna-LoveOnTheBrain.jpg",
    "source" : "source/007.Rihanna-LoveOnTheBrain.mp3"
  },
  {
    "cover"  : "cover/008.BrunoMars-That'sWhatILike.jpg",
    "source" : "source/008.BrunoMars-That'sWhatILike.mp3"
  },
  {
    "cover"  : "cover/009.BigSean-BounceBack.jpg",
    "source" : "source/009.BigSean-BounceBack.mp3"
  },
  {
    "cover"  : "cover/010.MachineGunKelly&CamilaCabello-BadThings.jpg",
    "source" : "source/010.MachineGunKelly&CamilaCabello-BadThings.mp3"
  }
];

// Model 인스턴스 객체를 통해 서버로부터 전달 받은 data 관리
// Model 생성자 함수 활용하여 Model {} 인스턴스 생성
var music_playlist = new Model(data);

// View 구현
var coverlist = document.querySelector('.coverlist');
// console.log('coverlist:', coverlist);


/**
 * --------------------------------
 * for 예시
 */

// data(JSON String -> Object) 순환 처리
// console.time('insertAdjacentHTML'); // 0.7ms
// console.time('appendChild'); // 0.6ms
// console.time('insertAdjacentElement'); // 0.6ms
// for ( var i=0, l=data.length; i<l; ++i ) {
  // var cover, alt;
  // cover = data[i].cover; // cover/EdSheeran-ShapeOfYou.jpg
  // alt = cover.split('/')[1].replace('.jpg', '');

  // insertAdjacentHTML 사용 예
  // coverlist.insertAdjacentHTML('beforeend', '<img src="media/'+ cover +'" alt="'+ alt +'">');

  // createElement() 사용 예
  // var img = document.createElement('img');
  // img.setAttribute('src', 'media/' + cover);
  // img.setAttribute('alt', alt);

  // console.log(img);

  // appendChild() 사용 예
  // coverlist.appendChild(img);

  // insertAdjacentElement() 사용 예
  // coverlist.insertAdjacentElement('beforeend', img);

// }
// console.timeEnd('insertAdjacentElement');


/**
 * --------------------------------
 * forEach 예시 [ES 5]
 */
music_playlist.read().forEach(function(item) {
  var cover, alt;
  cover = item.cover;
  alt   = cover.split('/')[1].replace('.jpg', '');
  coverlist.insertAdjacentHTML('beforeend', '<img src="media/'+ cover +'" alt="'+ alt +'">');
});

</script>
</body>
</html>
